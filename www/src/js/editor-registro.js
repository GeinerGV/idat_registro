var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var EDITOR_REGISTRO_REF=React.createRef();var EditorRegistro=function(_React$Component){_inherits(EditorRegistro,_React$Component);function EditorRegistro(props){_classCallCheck(this,EditorRegistro);var _this=_possibleConstructorReturn(this,(EditorRegistro.__proto__||Object.getPrototypeOf(EditorRegistro)).call(this,props));_this.state={save:{},edit_mode:props.edit_mode||false,dni_edit:false};_this.handleDniFound=_this.handleDniFound.bind(_this);_this.handleChangeMode=_this.handleChangeMode.bind(_this);_this.handleInputsChange=_this.handleInputsChange.bind(_this);_this.getPreventDefaultReset=_this.getPreventDefaultReset.bind(_this);return _this}_createClass(EditorRegistro,[{key:"componentDidMount",value:function componentDidMount(){$("#reset-form").attr("data-editing-text","Cancelar edici\xF3n");$("#send_btn").attr("data-editing-text","Actualizar informaci\xF3n")}},{key:"handleDniFound",value:function handleDniFound(data){if(!this.state.dni_edit){if(data.dni&&data.fullname&&data.distrito){data.telefono=data.telefono?data.telefono:"";this.setState({save:Object.assign({},data)});REGISTRO_REF.current.setState(Object.assign({},data,{dni_found:true}))}else{if(REGISTRO_REF.current.state.dni_found)REGISTRO_REF.current.setState({dni_found:false,fullname:"",distrito:"",telefono:""});this.setState({save:{}})}}else{}}},{key:"handleInputsChange",value:function handleInputsChange(e){var _this2=this;switch(e.target.id){case"fullname":case"distrito":case"telefono":if(this.state.edit_mode&&REGISTRO_REF.current.state.dni_found){var cambios=Object.keys(this.state.save).filter(function(val){return val!=e.target.id}).some(function(key){return _this2.state.save[key]!=REGISTRO_REF.current.state[key].trim()});cambios=cambios?cambios:e.target.value.trim()!=this.state.save[e.target.id];if(cambios){this.setState({editing:true});REGISTRO_REF.current.setState({dni_readonly:true,mod_cliente:true});$("#send_btn, #reset-form").button("editing")}else{if(this.state.editing){this.setState({editing:false});REGISTRO_REF.current.setState({dni_readonly:false,mod_cliente:false});$("#send_btn, #reset-form").button("reset")}}}break;}}},{key:"handleChangeMode",value:function handleChangeMode(e){var edit_mode=!this.state.edit_mode;this.setState({edit_mode:edit_mode});REGISTRO_REF.current.setState({others_not_readonly:edit_mode})}},{key:"getPreventDefaultReset",value:function getPreventDefaultReset(){if(this.state.editing){this.setState({editing:false});REGISTRO_REF.current.setState(Object.assign({},this.state.save,{dni_readonly:false,mod_cliente:false}));$("#send_btn, #reset-form").button("reset");return true}else{this.setState({save:{}})}return false}},{key:"render",value:function render(){return React.createElement("div",{className:"form-inline",style:{display:"flex",alignItems:"center",justifyContent:"center"}},React.createElement("button",{type:"button",onClick:this.handleChangeMode,className:"btn btn-"+(this.state.edit_mode?"success":"default"),"data-toggle":"button","aria-pressed":"false"},"Modo edici\xF3n: ",React.createElement("strong",null,this.state.edit_mode?"Activado":"Desactivado")))}}]);return EditorRegistro}(React.Component);
//# sourceMappingURL=editor-registro.js.map