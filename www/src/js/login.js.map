{"version":3,"sources":["../scripts/login.jsx"],"names":["Login","props","state","email","pass","save","tipo","handleInput","bind","handleSave","handleSubmit","e","setState","target","checked","val","reg","RegExp","test","event","len","value","length","id","isEmail","setSuccess","setError","setWarning","preventDefault","xmlhttp","XMLHttpRequest","params","onreadystatechange","readyState","status","data","JSON","parse","response","$","alert","prepend","Alerta","location","href","open","setRequestHeader","send","React","Component","ReactDOM","render","document","querySelector"],"mappings":"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","file":"login.js","sourcesContent":["\nclass Login extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {email: '', pass: '', save: true, tipo: 'info'};\n\n\t\tthis.handleInput = this.handleInput.bind(this);\n\t\tthis.handleSave = this.handleSave.bind(this);\n\t\tthis.handleSubmit = this.handleSubmit.bind(this);\n\t}\n\n\thandleSave(e) {\n\t\tthis.setState({save: e.target.checked});\n\t}\n\n\tisEmail(val) {\n\t\tvar reg = new RegExp(\"^[a-zA-Z0-9.!#$%&’*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\\.[a-zA-Z0-9-]+)*$\");\n\t\treturn reg.test(val);\n\t}\n\n\thandleInput(event) {\n\t\tlet len = event.target.value.length;\n\t\tif (len) {\n\t\t\tlet id = event.target.id;\n\t\t\tif ((id==\"email\" && this.isEmail(event.target.value)) || (id==\"password\" && len>7)) {\n\t\t\t\t// if (!grupo.classList.contains(\"has-success\")) {\n\t\t\t\t// \tgrupo.classList.remove(\"has-success\", \"has-error\");\n\t\t\t\tsetSuccess(event);\n\t\t\t\t\tswitch (id) {\n\t\t\t\t\t\tcase \"password\":\n\t\t\t\t\t\t\tthis.setState({pass: event.target.value});\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase \"email\":\n\t\t\t\t\t\t\tthis.setState({email: event.target.value});\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t// }\n\t\t\t} else {\n\t\t\t\tsetError(event);\n\t\t\t}\n\t\t} else {\n\t\t\tsetWarning(event);\n\t\t}\n\t}\n\n\thandleSubmit(event) {\n\t\tevent.preventDefault();\n\t\tif (this.state.email.length && this.state.pass.length) {\n\t\t\tlet xmlhttp = new XMLHttpRequest();\n\n\t\t\tlet params = `email=${this.state.email}&pass=${this.state.pass}&save=${this.state.save}`;\n\t\t\t//var tmp_this = this;\n\t\t\txmlhttp.onreadystatechange = function() {\n\t\t\t\tif (this.readyState == 4 && this.status == 200) {\n\t\t\t\t\t// document.getElementById(\"txtHint\").innerHTML = this.responseText;\n\t\t\t\t\tvar data = JSON.parse(xmlhttp.response);\n\t\t\t\t\t$('.alert').alert('close');\n\t\t\t\t\t$(\"#login-form\").prepend(Alerta(data));\n\t\t\t\t\tif (data.tipo == \"success\") location.href = \"/\";\n\t\t\t\t\t//tmp_this.setState({tipo: data.tipo});\n\t\t\t\t}\n\t\t\t};\n\t\t\txmlhttp.open(\"POST\", \"/login\", true);\n\t\t\txmlhttp.setRequestHeader(\"Content-type\", \"application/x-www-form-urlencoded\");\n\t\t\txmlhttp.send(params);\n\t\t}\n\t}\n\t\n\trender() {\n\t\treturn (\n\t\t\t<div id=\"login-form\" className=\"col-sm-8 col-xs-10\">\n\t\t\t\t<div className={\"panel panel-\"+this.state.tipo}>\n\t\t\t\t\t<div className=\"panel-heading\">\n\t\t\t\t\t\t<h3 className=\"panel-title\">Inicio de sesión</h3>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"panel-body\">\n\t\t\t\t\t\t<form className=\"form-horizontal\" onSubmit={this.handleSubmit} action=\"/login\">\n\t\t\t\t\t\t\t<div className=\"form-group\">\n\t\t\t\t\t\t\t\t<label htmlFor=\"Email\" className=\"col-sm-2 control-label\">Email</label>\n\t\t\t\t\t\t\t\t<div className=\"col-sm-10\">\n\t\t\t\t\t\t\t\t\t<input type=\"email\" className=\"form-control\" id=\"email\" placeholder=\"Email\" required={true} onChange={this.handleInput} />\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div className=\"form-group\">\n\t\t\t\t\t\t\t\t<label htmlFor=\"password\" className=\"col-sm-2 control-label\">Contraseña</label>\n\t\t\t\t\t\t\t\t<div className=\"col-sm-10\">\n\t\t\t\t\t\t\t\t<input type=\"password\" className=\"form-control\" id=\"password\" placeholder=\"Contraseña\" required={true} minLength={8} onChange={this.handleInput} />\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div className=\"form-group\">\n\t\t\t\t\t\t\t\t<div className=\"col-sm-offset-2 col-sm-10\">\n\t\t\t\t\t\t\t\t<div className=\"checkbox\">\n\t\t\t\t\t\t\t\t\t<label>\n\t\t\t\t\t\t\t\t\t\t<input type=\"checkbox\" onChange={this.handleSave} /> Recordarme\n\t\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div className=\"form-group\">\n\t\t\t\t\t\t\t\t<div className=\"col-sm-offset-2 col-sm-10\">\n\t\t\t\t\t\t\t\t<button type=\"submit\" className=\"btn btn-default\">Iniciar Sesión</button>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</form>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\n$(\n\tReactDOM.render(<Login />, document.querySelector('#login-cnt'))\n);\n"]}