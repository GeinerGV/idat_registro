{"version":3,"sources":["../scripts/editor-registro.jsx"],"names":["EDITOR_REGISTRO_REF","React","createRef","EditorRegistro","props","state","save","edit_mode","dni_edit","handleDniFound","bind","handleChangeMode","handleInputsChange","getPreventDefaultReset","$","attr","data","dni","fullname","distrito","telefono","setState","REGISTRO_REF","current","dni_found","e","target","id","cambios","Object","keys","filter","val","some","key","trim","value","editing","dni_readonly","mod_cliente","button","others_not_readonly","display","alignItems","justifyContent","Component"],"mappings":"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","file":"editor-registro.js","sourcesContent":["var EDITOR_REGISTRO_REF = React.createRef();\n\nclass EditorRegistro extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {save: {}, edit_mode: props.edit_mode||false, dni_edit: false};\n\t\tthis.handleDniFound = this.handleDniFound.bind(this);\n\t\tthis.handleChangeMode = this.handleChangeMode.bind(this);\n\t\tthis.handleInputsChange = this.handleInputsChange.bind(this);\n\t\tthis.getPreventDefaultReset = this.getPreventDefaultReset.bind(this);\n\t}\n\tcomponentDidMount() {\n\t\t$(\"#reset-form\").attr(\"data-editing-text\", \"Cancelar edici贸n\");\n\t\t$(\"#send_btn\").attr(\"data-editing-text\", \"Actualizar informaci贸n\");\n\t\t//$(\"#send_btn, #reset-form\").attr(\"data-editing-text\", \"Cancelar edici贸n\");\n\t}\n\thandleDniFound(data) {\n\t\tif (!this.state.dni_edit) {\n\t\t\tif (data.dni && data.fullname && data.distrito) {\n\t\t\t\tdata.telefono= data.telefono ? data.telefono : '';\n\t\t\t\tthis.setState({\n\t\t\t\t\tsave: {...data}\n\t\t\t\t});\n\t\t\t\tREGISTRO_REF.current.setState({...data, dni_found: true});\n\t\t\t} else {\n\t\t\t\tif (REGISTRO_REF.current.state.dni_found) REGISTRO_REF.current.setState({\n\t\t\t\t\tdni_found: false, fullname: '', distrito: '', telefono: ''\n\t\t\t\t});\n\t\t\t\tthis.setState({save: {}});\n\t\t\t}\n\t\t} else {\n\t\t\t\n\t\t}\n\t}\n\n\thandleInputsChange(e) {\n\t\tswitch(e.target.id) {\n\t\t\tcase 'fullname':\n\t\t\tcase 'distrito':\n\t\t\tcase 'telefono':\n\t\t\t\tif (this.state.edit_mode && REGISTRO_REF.current.state.dni_found) {\n\t\t\t\t\tlet cambios = Object.keys(this.state.save).filter(val=>val!=e.target.id).some((key)=>this.state.save[key]!=REGISTRO_REF.current.state[key].trim());\n\t\t\t\t\tcambios = cambios ? cambios : e.target.value.trim()!=this.state.save[e.target.id];\t\t\t\t\t\n\t\t\t\t\t//console.log(cambios, e.target.value, e.target.id, e.target.value!=this.state.save[e.target.id], Object.keys(this.state.save).filter(val=>val==e.target.id));\n\t\t\t\t\tif (cambios) {\n\t\t\t\t\t\tthis.setState({editing: true});\n\t\t\t\t\t\tREGISTRO_REF.current.setState({dni_readonly: true, mod_cliente: true});\n\t\t\t\t\t\t$(\"#send_btn, #reset-form\").button('editing');\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif (this.state.editing) {\n\t\t\t\t\t\t\tthis.setState({editing: false});\n\t\t\t\t\t\t\tREGISTRO_REF.current.setState({dni_readonly: false, mod_cliente: false});\n\t\t\t\t\t\t\t$(\"#send_btn, #reset-form\").button('reset');\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t}\n\t}\n\thandleChangeMode(e) {\n\t\tlet edit_mode = !this.state.edit_mode;\n\t\tthis.setState({edit_mode: edit_mode});\n\t\tREGISTRO_REF.current.setState({others_not_readonly: edit_mode});\n\t}\n\n\tgetPreventDefaultReset() {\t\t\n\t\tif (this.state.editing) {\n\t\t\tthis.setState({editing: false});\n\t\t\tREGISTRO_REF.current.setState({...this.state.save, dni_readonly: false, mod_cliente: false});\n\t\t\t$(\"#send_btn, #reset-form\").button('reset');\n\t\t\treturn true;\n\t\t} else {\n\t\t\tthis.setState({save: {}});\n\t\t}\n\t\treturn false;\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<div className=\"form-inline\" style={{display:'flex', alignItems: 'center', justifyContent: 'center'}}>\n\t\t\t\t<button type=\"button\" onClick={this.handleChangeMode} className={\"btn btn-\"+(this.state.edit_mode ? 'success' : 'default')} data-toggle=\"button\" aria-pressed=\"false\">\n\t\t\t\t\tModo edici贸n: <strong>{this.state.edit_mode ? \"Activado\" : \"Desactivado\"}</strong>\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t);\n\t}\n}\n"]}