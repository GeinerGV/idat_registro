{"version":3,"sources":["../scripts/datos.jsx"],"names":["Datos","props","opciones","Object","keys","state","selectedRow","tblHei","rowTipo","option","cargando","page","row_opcion","React","createRef","getRows","bind","getCurrRowsSource","handleChange","setTableHeight","getEditorPosY","handleMouseover","exportarExcel","handleOptionDataChange","dataLocalManager","prevProps","prevState","length","$","offset","top","height","date","split","fecha","Date","ses_data","sessionStorage","getItem","getRowsSesKey","parseDate","JSON","parse","num_rows","current","value","keys_data","values","sort","a","b","reverse","splice","getRowsSource","includes","rows","setRowsSource","Array","isArray","forEach","val","assign","setItem","stringify","hei","setState","data","dataManager","e","xmlhttp","XMLHttpRequest","params","onreadystatechange","readyState","status","prepend","Alerta","tipo","msg","open","setRequestHeader","send","config","URLSearchParams","append","toString","this_tmp","responseText","view","getDownloadDataParams","currentTarget","sectionRowIndex","target","querySelector","id","limits","thead","map","row","options","opt","txt","display","alignItems","justifyContent","maxWidth","width","canEdit","AdminRows","overflowX","overflowY","position","Component","goTo","Row","columns","cols","col","pos","optionalAttrs","className","onMouseOver","OpcionesDatos","active","onHandler","DATOS_REF","getInitPropsDatos","result","ses_view","ReactDOM","render","document"],"mappings":"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","file":"datos.js","sourcesContent":["class Datos extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\n\t\tthis.opciones = Object.keys(props.opciones);\n\t\tthis.state = {selectedRow: 0, tblHei: 0, rowTipo: null, option: this.opciones[0], cargando: false, page: 0};\n\t\t//console.log(this.state);\n\t\tthis.row_opcion = React.createRef();\n\t\tthis.getRows = this.getRows.bind(this);\n\t\tthis.getCurrRowsSource = this.getCurrRowsSource.bind(this);\n\t\tthis.handleChange = this.handleChange.bind(this);\n\t\tthis.setTableHeight = this.setTableHeight.bind(this);\n\t\tthis.getEditorPosY = this.getEditorPosY.bind(this);\n\t\tthis.handleMouseover = this.handleMouseover.bind(this);\n\t\tthis.exportarExcel = this.exportarExcel.bind(this);\n\t\tthis.handleOptionDataChange = this.handleOptionDataChange.bind(this);\n\t\tthis.dataLocalManager = this.dataLocalManager.bind(this);\n\n\t\t//this.ATENCION_NAME = \"lista-atencion-data\";\n\t\t//this.INGRESO_ATENCION = \"lista-ingreso-data\";\n\t}\n\n\tcomponentDidMount() {\n\t\tthis.setTableHeight();\n\t}\n\n\tcomponentDidUpdate(prevProps, prevState) {\n\t\tthis.setTableHeight();\n\t}\n\n\tgetEditorPosY() {\n\t\tif (this.state.selectedRow && this.state.selectedRow<this.getRows().length && !this.state.cargando) {\n\t\t\treturn $(`tbody tr:nth-child(${this.state.selectedRow+1})`).offset().top - $(\".tbl-data\").offset().top;\n\t\t}\n\t\treturn $(\".tbl-data thead\").height();\n\t}\n\n\tparseDate(date) {\n\t\t//console.log(date);\n\t\tdate = date.split(\" \");\n\t\tlet fecha = date[0].split(\"/\");\n\t\treturn new Date(fecha[1]+\"/\"+fecha[0]+\"/\"+fecha[2]+\" \"+date[1]);\n\t}\n\n\tgetRowsSesKey(option) {\n\t\tif (!option) option = this.state.option;\n\t\treturn \"data-datos-\"+option;\n\t}\n\t\n\tgetRows() {\n\t\tlet ses_data = sessionStorage.getItem(this.getRowsSesKey());\n\t\tlet parseDate = this.parseDate;\n\t\tif (ses_data) {\n\t\t\tses_data = JSON.parse(ses_data);\n\t\t\t//if (ses_data[this.state.option]) {\n\t\t\t\tlet num_rows = this.row_opcion.current ? this.row_opcion.current.value : 20;\n\t\t\t\tlet keys_data = [];\n\t\t\t\t//console.log(ses_data, Object.values(ses_data));\n\t\t\t\tswitch (this.state.option) {\n\t\t\t\t\tcase 'ingreso':\n\t\t\t\t\t\tkeys_data =  Object.values(ses_data).sort(function(a, b){return parseDate(a[5]) - parseDate(b[5])}).reverse().splice(0, num_rows);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tkeys_data =  Object.values(ses_data).sort(function(a, b){return parseDate(a[1]) - parseDate(b[1])}).reverse().splice(0, num_rows);\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t//console.log(\"keys\", keys_data);\n\t\t\t\treturn keys_data;\n\t\t\t//}\n\t\t}\n\t\treturn [];\n\t}\n\n\tgetCurrRowsSource() {\n\t\treturn this.getRowsSource(this.state.option);\n\t}\n\n\tgetRowsSource(option) {\n\t\tif (this.opciones.includes(option)) {\n\t\t\tlet ses_data = sessionStorage.getItem(this.getRowsSesKey(option));\n\t\t\tif (ses_data) {\n\t\t\t\tses_data = JSON.parse(ses_data);\n\t\t\t\t//if (ses_data[option]) return ses_data[option];\n\t\t\t\treturn ses_data;\n\t\t\t}\n\t\t}\n\t\treturn null;\n\t}\n\n\tsetCurrRowsSource(rows) {\n\t\tthis.setRowsSource(this.state.option, rows);\n\t}\n\n\tsetRowsSource(option, rows) {\n\t\tif (this.opciones.includes(option) && typeof rows == 'object') {\n\t\t\tlet ses_data = sessionStorage.getItem(this.getRowsSesKey(option));\n\t\t\tif (ses_data) {\n\t\t\t\tses_data = JSON.parse(ses_data);\n\t\t\t\t//if (ses_data[option]) {\n\t\t\t\t\t if (!Array.isArray(rows)) {\n\t\t\t\t\t\t ses_data = rows;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tses_data = {}\n\t\t\t\t\t\trows.forEach(function (val) {\n\t\t\t\t\t\t\tObject.assign(ses_data, {[val[0]]: val});\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t//}\n\t\t\t}\n\t\t\tsessionStorage.setItem(this.getRowsSesKey(option), JSON.stringify(ses_data));\n\t\t}\n\t}\n\n\tsetTableHeight() {\n\t\tlet hei = $(\".tbl-data\").height()+17+20;\n\t\tif (hei != this.state.tblHei) this.setState({tblHei: hei});\n\t}\n\n\tdataLocalManager(data) {\n\t\tdataManager(data);\n\t\t/*let rows = this.getCurrRowsSource();\n\t\tif (Object.keys(rows).length>100) {\n\t\t\tObject.keys(rows).slice()\n\t\t}*/\n\t}\n\n\texportarExcel(e) {\n\t\tlet xmlhttp = new XMLHttpRequest();\n\t\tlet params = `export_data=true&rows=${this.row_opcion.current.value}`;\n\t\txmlhttp.onreadystatechange = function() {\n\t\t\tif (this.readyState == 4 && this.status == 200) {\n\t\t\t\t$(\"#datos-cnt\").prepend(Alerta({tipo: \"success\", msg: \"Exportado exitosamente\"}));\n\t\t\t}\n\t\t}\n\t\txmlhttp.open(\"POST\", \"/datos\", true);\n\t\txmlhttp.setRequestHeader(\"Content-type\", \"application/x-www-form-urlencoded\");\n\t\txmlhttp.send(params);\n\t\t//e.preventDefault();\n\t}\n\n\tgetDownloadDataParams(config) {\n\t\tif (!config) config = {};\n\t\tif (!config.option) config.option=this.state.option;\n\t\tlet params = new URLSearchParams();\n\t\tparams.append(\"json\", true);\n\t\tif (this.row_opcion.current.value!=20) params.append(\"rows\", this.row_opcion.current.value);\n\t\tif (config.option!=this.opciones[0]) params.append(\"view\", config.option);\n\t\tif (this.state.page>0) params.append(\"page\", this.state.page);\n\t\treturn params.toString();\n\t\t//return `json=true&rows=${this.row_opcion.current.value}&json=true${view}`;\n\t\t\n\t}\n\n\thandleChange(e) {\n\t\tthis.setState({cargando: true, selectedRow:0});\n\t\tlet xmlhttp = new XMLHttpRequest();\n\t\tlet this_tmp = this;\n\t\txmlhttp.onreadystatechange = function() {\n\t\t\tif (this.readyState == 4 && this.status == 200) {\n\t\t\t\tthis_tmp.dataLocalManager(JSON.parse(this.responseText));\n\t\t\t\tthis_tmp.setState({cargando: false});\n\t\t\t}\n\t\t}\n\t\tlet view = this.state.option!=this.opciones[0] ? \"&view=\"+this.state.option : \"\";\n\t\txmlhttp.open(\"GET\", \"/datos?\"+this.getDownloadDataParams(), true);\n\t\txmlhttp.send();\n\t}\n\n\thandleMouseover(e) {\n\t\t//console.log(e.currentTarget.sectionRowIndex);\n\t\tthis.setState({selectedRow: e.currentTarget.sectionRowIndex, rowTipo: \"active\"});\n\t}\n\n\tsetRowTipo(tipo) {\n\t\tthis.setState({rowTipo: tipo});\n\t\treturn null;\n\t}\n\n\thandleOptionDataChange(e) {\n\t\tlet option = e.target.querySelector(\"input\").id;\n\t\tthis.setState({option: option, cargando: true, selectedRow:0});\n\t\tlet xmlhttp = new XMLHttpRequest();\n\t\t//let view = option!=this.opciones[0] ? \"&view=\"+option : \"\";\n\t\t//let params = `rows=${this.row_opcion.current.value}&json=true${view}`;\n\t\tlet this_tmp = this;\n\t\txmlhttp.onreadystatechange = function() {\n\t\t\tif (this.readyState == 4 && this.status == 200) {\n\t\t\t\t//dataManager(JSON.parse(this.responseText));\n\t\t\t\tthis_tmp.dataLocalManager(JSON.parse(this.responseText));\n\t\t\t\tthis_tmp.setState({cargando: false});\n\t\t\t}\n\t\t}\n\t\txmlhttp.open(\"GET\", \"/datos?\"+this.getDownloadDataParams({option: option}), true);\n\t\txmlhttp.send();\n\t}\n\n\tgetDataSelectedRow() {\n\t\treturn this.getRows()[this.state.selectedRow];\n\t}\n\n\tgetPages() {\n\t\tlet limits = sessionStorage.getItem(\"data-datos-limits\");\n\t\tif (limits) {\n\t\t\tlimits = JSON.parse(limits);\n\t\t}\n\t}\n\n\trender () {\n\t\tlet thead = this.props.opciones[this.state.option].thead.map((val)=>(<th key={val}>{val}</th>));\n\t\tconst rows = !this.state.cargando ?\n\t\t\t\t(this.getRows().map((row, id) => (\n\t\t\t\t\t<Row key={\"row\"+id} tipo={id==this.state.selectedRow ? this.state.rowTipo : null} onMouseOver={this.handleMouseover} cols={row} pos={id} idAtencion={row[0]} />\n\t\t\t\t))) :\n\t\t\t\t(<tr><td className=\"text-center\" colSpan={thead.length}>Cargando ...</td></tr>);\n\t\t\t\t\t\n\t\tlet tblHei = this.state.tblHei;\n\t\tlet options = this.opciones.map((opt)=>(\n\t\t\t<OpcionesDatos onHandler={this.handleOptionDataChange} active={opt==this.state.option} id={opt} txt={this.props.opciones[opt].txt} key={opt} />\n\t\t));\n\t\treturn (\n\t\t\t<React.Fragment>\n\t\t\t\t<form className=\"form-inline\" style={{display:'flex', alignItems: 'center', justifyContent: 'space-between'}} onSubmit={this.exportarExcel} method=\"POST\">\n\t\t\t\t\t<input type=\"hidden\" name=\"export_data\" value=\"true\"/>\n\t\t\t\t\t<button type=\"submit\" className=\"btn btn-default btn-lg\">EXPORTAR <i className=\"glyphicon glyphicon-file\"></i></button>\n\t\t\t\t\t<div className=\"form-group\">\n\t\t\t\t\t\t<div className=\"btn-group\" data-toggle=\"buttons\">\n\t\t\t\t\t\t\t{options}\n\t\t\t\t\t\t</div>\n                    </div>\n\t\t\t\t\t<div className=\"form-group pull-right\">\n                    \t<select className=\"form-control\" ref={this.row_opcion} onChange={this.handleChange} defaultValue=\"20\">\n\t\t\t\t\t\t\t<option value=\"10\">10</option>\n\t\t\t\t\t\t\t<option value=\"20\">20</option>\n\t\t\t\t\t\t\t<option value=\"30\">30</option>\n\t\t\t\t\t\t\t{/* <option value=\"0\">hoy</option> */}\n\t\t\t\t\t\t</select>\n                    </div>\n\t\t\t\t</form>\n\t\t\t\t<div className=\"tbl-cnt\" style={{display: \"flex\", maxWidth: \"100wp\", width: \"100%\"}}>\n\t\t\t\t\t{(this.props.canEdit && typeof AdminRows != \"undefined\" && this.getRows().length>0) && <div className=\"edit-tbl-row-cnt\">\n\t\t\t\t\t\t<AdminRows posY={this.getEditorPosY()} dataRow={rows[this.state.selectedRow]} />\n\t\t\t\t\t</div>}\n\t\t\t\t\t<div style={{height: tblHei+\"px\", width: \"100%\", overflowX: \"overlay\", overflowY: \"hidden\", position: \"relative\"}}>\n\t\t\t\t\t\t<table className=\"table table-hover tbl-data\" style={{position: \"absolute\"}}>\n\t\t\t\t\t\t\t<thead>\n\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t{thead}\n\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t</thead>\n\t\t\t\t\t\t\t<tbody>\n\t\t\t\t\t\t\t\t{rows}\n\t\t\t\t\t\t\t</tbody>\n\t\t\t\t\t\t</table>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t{/*<nav aria-label=\"Page navigation\">\n\t\t\t\t  <ul className=\"pagination\">\n\t\t\t\t\t\n\t\t\t\t\t<li><a href=\"#\">1</a></li>\n\t\t\t\t\t<li><a href=\"#\">2</a></li>\n\t\t\t\t\t<li><a href=\"#\">3</a></li>\n\t\t\t\t\t<li><a href=\"#\">4</a></li>\n\t\t\t\t\t<li><a href=\"#\">5</a></li>\n\t\t\t\t\t<li>\n\t\t\t\t\t  <a href=\"#\" aria-label=\"Next\">\n\t\t\t\t\t\t<span aria-hidden=\"true\">&raquo;</span>\n\t\t\t\t\t  </a>\n\t\t\t\t\t</li>\n\t\t\t\t  </ul>\n\t\t\t\t</nav>*/}\n\t\t\t</React.Fragment>\n\t\t);\n\t}\n}\n\nfunction goTo(props) {\n\t<li>\n\t  <a href=\"#\" aria-label=\"\">\n\t\t<span aria-hidden=\"true\">&laquo;</span>\n\t  </a>\n\t</li>\n}\n\nfunction Row(props) {\n\tconst columns = props.cols.map((col, id) => (id==0 ? <td key={\"col\"+id}>{props.pos+1}</td> : <td key={\"col\"+id}>{col}</td>));\n\tconst optionalAttrs = props.tipo ? {className: props.tipo} : {};\n\treturn (\n\t\t<tr onMouseOver={props.onMouseOver} {...optionalAttrs}>\n\t\t\t{columns}\n\t\t</tr>\n\t);\n}\n\nfunction OpcionesDatos(props) {\n\treturn (\n\t\t<label className={\"btn btn-\" + (props.active ? \"warning active\" : \"default\")} onClick={props.onHandler} >\n\t\t\t<input type=\"radio\"name=\"options\" id={props.id} /> {props.txt}\n\t\t</label>\n\t);\n}\n\nvar DATOS_REF = React.createRef();\n\nfunction getInitPropsDatos() {\n\tlet result = {rows: []};\n\tlet ses_view = sessionStorage.getItem('view-datos');\n\tif (ses_view) {\n\t\tObject.assign(result, JSON.parse(ses_view));\n\t}/*\n\tlet ses_data = sessionStorage.getItem('data-datos');\n\tif (ses_data) {\n\t\tses_data = JSON.parse(ses_data);\n\t\tlet keys_data = Object.keys(ses_data.main_rows).sort().reverse().splice(0, 20);\n\t\t//console.log(\"keys\", keys_data);\n\t\tObject.assign(result, {rows: keys_data.map((key)=>ses_data.main_rows[key])});\n\t}\n\tconsole.log(\"RESULT_PROPS\", result);*/\n\treturn result;\n}\n\n$(\n\tReactDOM.render(<Datos ref={DATOS_REF} {...getInitPropsDatos()} />, document.querySelector(\"#datos-cnt\"))\n);\n"]}