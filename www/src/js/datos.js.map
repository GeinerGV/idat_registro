{"version":3,"sources":["../scripts/datos.jsx"],"names":["Datos","props","state","rows","row_opcion","React","createRef","handleChange","bind","xmlhttp","XMLHttpRequest","tmp_this","onreadystatechange","readyState","status","data","JSON","parse","responseText","setState","open","current","value","send","e","params","length","$","prepend","Alerta","tipo","msg","setRequestHeader","target","map","row","id","exportarExcel","Component","Row","columns","cols","col","ReactDOM","render","document","querySelector"],"mappings":"uyCAAMA,M,8DACL,eAAYC,KAAZ,CAAmB,iIACZA,KADY,GAElB,MAAKC,KAAL,CAAa,CAACC,KAAM,EAAP,CAAb,CACA,MAAKC,UAAL,CAAkBC,MAAMC,SAAN,EAAlB,CACA,MAAKC,YAAL,CAAoB,MAAKA,YAAL,CAAkBC,IAAlB,OAApB,CAJkB,YAKlB,C,+EAEmB,CACnB,GAAIC,SAAU,GAAIC,eAAlB,CACA,GAAIC,UAAW,IAAf,CACAF,QAAQG,kBAAR,CAA6B,UAAW,CACvC,GAAI,KAAKC,UAAL,EAAmB,CAAnB,EAAwB,KAAKC,MAAL,EAAe,GAA3C,CAAgD,CAC/C,GAAIC,MAAOC,KAAKC,KAAL,CAAW,KAAKC,YAAhB,CAAX,CACAP,SAASQ,QAAT,CAAkB,CAAEhB,KAAMY,IAAR,CAAlB,CACA,CACD,CALD,CAMAN,QAAQW,IAAR,CAAa,KAAb,CAAoB,kCAAkC,KAAKhB,UAAL,CAAgBiB,OAAhB,CAAwBC,KAA9E,CAAqF,IAArF,EACAb,QAAQc,IAAR,EACA,C,oDAEaC,C,CAAG,CAChB,GAAIf,SAAU,GAAIC,eAAlB,CACA,GAAIe,iCAAkC,KAAKvB,KAAL,CAAWC,IAAX,CAAgBuB,MAAtD,CACAjB,QAAQG,kBAAR,CAA6B,UAAW,CACvC,GAAI,KAAKC,UAAL,EAAmB,CAAnB,EAAwB,KAAKC,MAAL,EAAe,GAA3C,CAAgD,CAC/Ca,EAAE,YAAF,EAAgBC,OAAhB,CAAwBC,OAAO,CAACC,KAAM,SAAP,CAAkBC,IAAK,wBAAvB,CAAP,CAAxB,CACA,CACD,CAJD,CAKAtB,QAAQW,IAAR,CAAa,MAAb,CAAqB,QAArB,CAA+B,IAA/B,EACAX,QAAQuB,gBAAR,CAAyB,cAAzB,CAAyC,mCAAzC,EACAvB,QAAQc,IAAR,CAAaE,MAAb,CACA,C,kDAEYD,C,CAAG,CACf,GAAIf,SAAU,GAAIC,eAAlB,CACA,GAAIC,UAAW,IAAf,CACAF,QAAQG,kBAAR,CAA6B,UAAW,CACvC,GAAI,KAAKC,UAAL,EAAmB,CAAnB,EAAwB,KAAKC,MAAL,EAAe,GAA3C,CAAgD,CAC/C,GAAIC,MAAOC,KAAKC,KAAL,CAAW,KAAKC,YAAhB,CAAX,CACAP,SAASQ,QAAT,CAAkB,CAAEhB,KAAMY,IAAR,CAAlB,CACA,CACD,CALD,CAMAN,QAAQW,IAAR,CAAa,KAAb,CAAoB,kCAAkCI,EAAES,MAAF,CAASX,KAA/D,CAAsE,IAAtE,EACAb,QAAQc,IAAR,EACA,C,uCAES,CACT,GAAMpB,MAAO,KAAKD,KAAL,CAAWC,IAAX,CAAgB+B,GAAhB,CAAoB,SAACC,GAAD,CAAMC,EAAN,QAAa,qBAAC,GAAD,EAAK,IAAK,MAAMA,EAAhB,CAAoB,KAAMD,GAA1B,EAAb,CAApB,CAAb,CACA,MACC,qBAAC,KAAD,CAAO,QAAP,MACC,4BAAM,UAAU,aAAhB,CAA8B,SAAU,KAAKE,aAA7C,CAA4D,OAAO,MAAnE,EACC,6BAAO,KAAK,QAAZ,CAAqB,KAAK,aAA1B,CAAwC,MAAM,MAA9C,EADD,CAEC,8BAAQ,KAAK,QAAb,CAAsB,UAAU,wBAAhC,cAAkE,yBAAG,UAAU,0BAAb,EAAlE,CAFD,CAGC,2BAAK,UAAU,uBAAf,EACgB,8BAAQ,UAAU,cAAlB,CAAiC,IAAK,KAAKjC,UAA3C,CAAuD,SAAU,KAAKG,YAAtE,EACd,8BAAQ,MAAM,IAAd,OADc,CAEd,8BAAQ,MAAM,IAAd,OAFc,CAGd,8BAAQ,MAAM,IAAd,OAHc,CADhB,CAHD,CADD,CAaC,6BAAO,UAAU,mBAAjB,EACC,iCACC,8BACC,6CADD,CAEC,oCAFD,CAGC,kDAHD,CAIC,yCAJD,CAKC,yCALD,CAMC,6CAND,CADD,CADD,CAWC,iCACEJ,IADF,CAXD,CAbD,CA8BD,C,kBAhFkBE,MAAMiC,S,EAmF1B,QAASC,IAAT,CAAatC,KAAb,CAAoB,CACnB,GAAMuC,SAAUvC,MAAMwC,IAAN,CAAWP,GAAX,CAAe,SAACQ,GAAD,CAAMN,EAAN,QAAa,2BAAI,IAAK,MAAMA,EAAf,EAAoBM,GAApB,CAAb,CAAf,CAAhB,CACA,MACC,+BACEF,OADF,CAID,CAEDb,EACCgB,SAASC,MAAT,CAAgB,oBAAC,KAAD,MAAhB,CAA2BC,SAASC,aAAT,CAAuB,YAAvB,CAA3B,CADD","file":"datos.js","sourcesContent":["class Datos extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {rows: []}\n\t\tthis.row_opcion = React.createRef();\n\t\tthis.handleChange = this.handleChange.bind(this);\n\t}\n\n\tcomponentDidMount() {\n\t\tlet xmlhttp = new XMLHttpRequest();\n\t\tlet tmp_this = this;\n\t\txmlhttp.onreadystatechange = function() {\n\t\t\tif (this.readyState == 4 && this.status == 200) {\n\t\t\t\tlet data = JSON.parse(this.responseText);\n\t\t\t\ttmp_this.setState({ rows: data});\n\t\t\t}\n\t\t}\n\t\txmlhttp.open(\"GET\", \"/datos?data=get&json=true&rows=\"+this.row_opcion.current.value, true);\n\t\txmlhttp.send();\n\t}\n\n\texportarExcel(e) {\n\t\tlet xmlhttp = new XMLHttpRequest();\n\t\tlet params = `export_data=true&rows=${this.state.rows.length}`;\n\t\txmlhttp.onreadystatechange = function() {\n\t\t\tif (this.readyState == 4 && this.status == 200) {\n\t\t\t\t$(\"#datos-cnt\").prepend(Alerta({tipo: \"success\", msg: \"Exportado exitosamente\"}));\n\t\t\t}\n\t\t}\n\t\txmlhttp.open(\"POST\", \"/datos\", true);\n\t\txmlhttp.setRequestHeader(\"Content-type\", \"application/x-www-form-urlencoded\");\n\t\txmlhttp.send(params);\n\t}\n\n\thandleChange(e) {\n\t\tlet xmlhttp = new XMLHttpRequest();\n\t\tlet tmp_this = this;\n\t\txmlhttp.onreadystatechange = function() {\n\t\t\tif (this.readyState == 4 && this.status == 200) {\n\t\t\t\tlet data = JSON.parse(this.responseText);\n\t\t\t\ttmp_this.setState({ rows: data});\n\t\t\t}\n\t\t}\n\t\txmlhttp.open(\"GET\", \"/datos?data=get&json=true&rows=\"+e.target.value, true);\n\t\txmlhttp.send();\n\t}\n\n\trender () {\n\t\tconst rows = this.state.rows.map((row, id) => <Row key={\"row\"+id} cols={row} />);\n\t\treturn (\n\t\t\t<React.Fragment>\n\t\t\t\t<form className=\"form-inline\" onSubmit={this.exportarExcel} method=\"POST\">\n\t\t\t\t\t<input type=\"hidden\" name=\"export_data\" value=\"true\"/>\n\t\t\t\t\t<button type=\"submit\" className=\"btn btn-default btn-lg\">EXPORTAR <i className=\"glyphicon glyphicon-file\"></i></button>\n\t\t\t\t\t<div className=\"form-group pull-right\">\n                    \t<select className=\"form-control\" ref={this.row_opcion} onChange={this.handleChange}>\n\t\t\t\t\t\t\t<option value=\"10\">10</option>\n\t\t\t\t\t\t\t<option value=\"20\">20</option>\n\t\t\t\t\t\t\t<option value=\"30\">30</option>\n\t\t\t\t\t\t\t{/* <option value=\"0\">hoy</option> */}\n\t\t\t\t\t\t</select>\n                    </div>\n\t\t\t\t</form>\n\t\t\t\t<table className=\"table table-hover\">\n\t\t\t\t\t<thead>\n\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t<th>FECHA - HORA</th>\n\t\t\t\t\t\t\t<th>DNI</th>\n\t\t\t\t\t\t\t<th>NOMBRE Y APELLIDO</th>\n\t\t\t\t\t\t\t<th>TELEFONO</th>\n\t\t\t\t\t\t\t<th>DISTRITO</th>\n\t\t\t\t\t\t\t<th>ATENDIDO POR</th>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t</thead>\n\t\t\t\t\t<tbody>\n\t\t\t\t\t\t{rows}\n\t\t\t\t\t</tbody>\n\t\t\t\t</table>\n\t\t\t</React.Fragment>\n\t\t);\n\t}\n}\n\nfunction Row(props) {\n\tconst columns = props.cols.map((col, id) => <td key={\"col\"+id}>{col}</td>);\n\treturn (\n\t\t<tr>\n\t\t\t{columns}\n\t\t</tr>\n\t);\n}\n\n$(\n\tReactDOM.render(<Datos />, document.querySelector(\"#datos-cnt\"))\n);\n"]}