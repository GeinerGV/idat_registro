{"version":3,"sources":["../scripts/datos.jsx"],"names":["Datos","props","opciones","Object","keys","state","selectedRow","tblHei","rowTipo","option","cargando","row_opcion","React","createRef","getRows","bind","getCurrRowsSource","handleChange","setTableHeight","getEditorPosY","handleMouseover","exportarExcel","handleOptionDataChange","prevProps","prevState","length","$","offset","top","height","ses_data","sessionStorage","getItem","JSON","parse","keys_data","sort","reverse","splice","map","key","rows","Array","isArray","tmp_res","row","assign","setItem","hei","setState","e","xmlhttp","XMLHttpRequest","params","current","value","onreadystatechange","readyState","status","prepend","Alerta","tipo","msg","open","setRequestHeader","send","tmp_this","data","responseText","target","currentTarget","sectionRowIndex","querySelector","id","this_tmp","dataManager","thead","val","options","opt","txt","display","alignItems","justifyContent","maxWidth","width","canEdit","AdminRows","overflowX","overflowY","position","Component","Row","columns","cols","col","pos","optionalAttrs","className","onMouseOver","OpcionesDatos","active","onHandler","DATOS_REF","getInitPropsDatos","result","ses_view","ReactDOM","render","document"],"mappings":"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","file":"datos.js","sourcesContent":["class Datos extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\n\t\tthis.opciones = Object.keys(props.opciones);\n\t\tthis.state = {selectedRow: 0, tblHei: 0, rowTipo: null, option: this.opciones[0], cargando: false};\n\t\t//console.log(this.state);\n\t\tthis.row_opcion = React.createRef();\n\t\tthis.getRows = this.getRows.bind(this);\n\t\tthis.getCurrRowsSource = this.getCurrRowsSource.bind(this);\n\t\tthis.handleChange = this.handleChange.bind(this);\n\t\tthis.setTableHeight = this.setTableHeight.bind(this);\n\t\tthis.getEditorPosY = this.getEditorPosY.bind(this);\n\t\tthis.handleMouseover = this.handleMouseover.bind(this);\n\t\tthis.exportarExcel = this.exportarExcel.bind(this);\n\t\tthis.handleOptionDataChange = this.handleOptionDataChange.bind(this);\n\n\t\t//this.ATENCION_NAME = \"lista-atencion-data\";\n\t\t//this.INGRESO_ATENCION = \"lista-ingreso-data\";\n\t}\n\n\tcomponentDidMount() {\n\t\tthis.setTableHeight();\n\t}\n\n\tcomponentDidUpdate(prevProps, prevState) {\n\t\tthis.setTableHeight();\n\t}\n\n\tgetEditorPosY() {\n\t\tif (this.state.selectedRow && this.state.selectedRow<this.getRows().length && !this.state.cargando) {\n\t\t\treturn $(`tbody tr:nth-child(${this.state.selectedRow+1})`).offset().top - $(\".tbl-data\").offset().top;\n\t\t}\n\t\treturn $(\".tbl-data thead\").height();\n\t}\n\t\n\tgetRows() {\n\t\tlet ses_data = sessionStorage.getItem('data-datos');\n\t\tif (ses_data) {\n\t\t\tses_data = JSON.parse(ses_data);\n\t\t\tif (ses_data[this.state.option]) {\n\t\t\t\tlet keys_data = Object.keys(ses_data[this.state.option]).sort().reverse().splice(0, 20);\n\t\t\t//console.log(\"keys\", keys_data);\n\t\t\t\treturn keys_data.map((key)=>ses_data[this.state.option][key]);\t\n\t\t\t}\n\t\t\treturn null;\n\t\t}\n\t\treturn [];\n\t}\n\n\tgetCurrRowsSource() {\n\t\tlet ses_data = sessionStorage.getItem('data-datos');\n\t\tif (ses_data) {\n\t\t\tses_data = JSON.parse(ses_data);\n\t\t\tif (ses_data[this.state.option]) return ses_data[this.state.option];\n\t\t\treturn null;\n\t\t}\n\t\treturn null;\n\t}\n\n\tsetCurrRowsSource(rows) {\n\t\tif (typeof rows == 'object') {\n\t\t\tlet ses_data = sessionStorage.getItem('data-datos');\n\t\t\tif (ses_data) {\n\t\t\t\tses_data = JSON.parse(ses_data);\n\t\t\t\tif (ses_data[this.state.option]) {\n\t\t\t\t\t if (!Array.isArray(rows)) {\n\t\t\t\t\t\t ses_data[this.state.option] = rows;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tlet tmp_res = {}\n\t\t\t\t\t\tfor(row in rows) {\n\t\t\t\t\t\t\tObject.assign(rows, rows[row]);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tsessionStorage.setItem('data-datos');\n\t\t}\n\t}\n\n\tsetTableHeight() {\n\t\tlet hei = $(\".tbl-data\").height()+17+20;\n\t\tif (hei != this.state.tblHei) this.setState({tblHei: hei});\n\t}\n\n\texportarExcel(e) {\n\t\tlet xmlhttp = new XMLHttpRequest();\n\t\tlet params = `export_data=true&rows=${this.row_opcion.current.value}`;\n\t\txmlhttp.onreadystatechange = function() {\n\t\t\tif (this.readyState == 4 && this.status == 200) {\n\t\t\t\t$(\"#datos-cnt\").prepend(Alerta({tipo: \"success\", msg: \"Exportado exitosamente\"}));\n\t\t\t}\n\t\t}\n\t\txmlhttp.open(\"POST\", \"/datos\", true);\n\t\txmlhttp.setRequestHeader(\"Content-type\", \"application/x-www-form-urlencoded\");\n\t\txmlhttp.send(params);\n\t\t//e.preventDefault();\n\t}\n\n\thandleChange(e) {\n\t\tlet xmlhttp = new XMLHttpRequest();\n\t\tlet tmp_this = this;\n\t\txmlhttp.onreadystatechange = function() {\n\t\t\tif (this.readyState == 4 && this.status == 200) {\n\t\t\t\tlet data = JSON.parse(this.responseText);\n\t\t\t\ttmp_this.setState({ rows: data.rows});\n\t\t\t}\n\t\t}\n\t\txmlhttp.open(\"GET\", \"/datos?data=get&json=true&rows=\"+e.target.value, true);\n\t\txmlhttp.send();\n\t}\n\n\thandleMouseover(e) {\n\t\t//console.log(e.currentTarget.sectionRowIndex);\n\t\tthis.setState({selectedRow: e.currentTarget.sectionRowIndex, rowTipo: \"active\"});\n\t}\n\n\tsetRowTipo(tipo) {\n\t\tthis.setState({rowTipo: tipo});\n\t\treturn null;\n\t}\n\n\thandleOptionDataChange(e) {\n\t\tlet option = e.target.querySelector(\"input\").id;\n\t\tthis.setState({option: option});\n\t\tlet xmlhttp = new XMLHttpRequest();\n\t\tlet params = `view=${option}&rows=${this.row_opcion.current.value}&json=true`;\n\t\tlet this_tmp = this;\n\t\tthis_tmp.setState({cargando: true});\n\t\txmlhttp.onreadystatechange = function() {\n\t\t\tif (this.readyState == 4 && this.status == 200) {\n\t\t\t\tdataManager(JSON.parse(this.responseText));\n\t\t\t\tthis_tmp.setState({cargando: false});\n\t\t\t}\n\t\t}\n\t\txmlhttp.open(\"GET\", \"/datos?\"+params, true);\n\t\txmlhttp.send();\n\t}\n\n\n\trender () {\n\t\tlet thead = this.props.opciones[this.state.option].thead.map((val)=>(<th key={val}>{val}</th>));\n\t\tconst rows = !this.state.cargando ?\n\t\t\t\t(this.getRows().map((row, id) => (\n\t\t\t\t\t<Row key={\"row\"+id} tipo={id==this.state.selectedRow ? this.state.rowTipo : null} onMouseOver={this.handleMouseover} cols={row} pos={id} idAtencion={row[0]} />\n\t\t\t\t))) :\n\t\t\t\t(<tr><td className=\"text-center\" colSpan={thead.length}>Cargando ...</td></tr>);\n\t\t\t\t\t\n\t\tlet tblHei = this.state.tblHei;\n\t\tlet options = this.opciones.map((opt)=>(\n\t\t\t<OpcionesDatos onHandler={this.handleOptionDataChange} active={opt==this.state.option} id={opt} txt={this.props.opciones[opt].txt} key={opt} />\n\t\t));\n\t\treturn (\n\t\t\t<React.Fragment>\n\t\t\t\t<form className=\"form-inline\" style={{display:'flex', alignItems: 'center', justifyContent: 'space-between'}} onSubmit={this.exportarExcel} method=\"POST\">\n\t\t\t\t\t<input type=\"hidden\" name=\"export_data\" value=\"true\"/>\n\t\t\t\t\t<button type=\"submit\" className=\"btn btn-default btn-lg\">EXPORTAR <i className=\"glyphicon glyphicon-file\"></i></button>\n\t\t\t\t\t<div className=\"form-group\">\n\t\t\t\t\t\t<div className=\"btn-group\" data-toggle=\"buttons\">\n\t\t\t\t\t\t\t{options}\n\t\t\t\t\t\t</div>\n                    </div>\n\t\t\t\t\t<div className=\"form-group pull-right\">\n                    \t<select className=\"form-control\" ref={this.row_opcion} onChange={this.handleChange} defaultValue=\"20\">\n\t\t\t\t\t\t\t<option value=\"10\">10</option>\n\t\t\t\t\t\t\t<option value=\"20\">20</option>\n\t\t\t\t\t\t\t<option value=\"30\">30</option>\n\t\t\t\t\t\t\t{/* <option value=\"0\">hoy</option> */}\n\t\t\t\t\t\t</select>\n                    </div>\n\t\t\t\t</form>\n\t\t\t\t<div className=\"tbl-cnt\" style={{display: \"flex\", maxWidth: \"100wp\", width: \"100%\"}}>\n\t\t\t\t\t{(this.props.canEdit && typeof AdminRows != \"undefined\" && rows.length>0) && <div className=\"edit-tbl-row-cnt\">\n\t\t\t\t\t\t<AdminRows posY={this.getEditorPosY()} dataRow={rows[this.state.selectedRow]} />\n\t\t\t\t\t</div>}\n\t\t\t\t\t<div style={{height: tblHei+\"px\", width: \"100%\", overflowX: \"overlay\", overflowY: \"hidden\", position: \"relative\"}}>\n\t\t\t\t\t\t<table className=\"table table-hover tbl-data\" style={{position: \"absolute\"}}>\n\t\t\t\t\t\t\t<thead>\n\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t{thead}\n\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t</thead>\n\t\t\t\t\t\t\t<tbody>\n\t\t\t\t\t\t\t\t{rows}\n\t\t\t\t\t\t\t</tbody>\n\t\t\t\t\t\t</table>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</React.Fragment>\n\t\t);\n\t}\n}\n\nfunction Row(props) {\n\tconst columns = props.cols.map((col, id) => (id==0 ? <td key={\"col\"+id}>{props.pos+1}</td> : <td key={\"col\"+id}>{col}</td>));\n\tconst optionalAttrs = props.tipo ? {className: props.tipo} : {};\n\treturn (\n\t\t<tr onMouseOver={props.onMouseOver} {...optionalAttrs}>\n\t\t\t{columns}\n\t\t</tr>\n\t);\n}\n\nfunction OpcionesDatos(props) {\n\treturn (\n\t\t<label className={\"btn btn-\" + (props.active ? \"warning active\" : \"default\")} onClick={props.onHandler} >\n\t\t\t<input type=\"radio\"name=\"options\" id={props.id} /> {props.txt}\n\t\t</label>\n\t);\n}\n\nvar DATOS_REF = React.createRef();\n\nfunction getInitPropsDatos() {\n\tlet result = {rows: []};\n\tlet ses_view = sessionStorage.getItem('view-datos');\n\tif (ses_view) {\n\t\tObject.assign(result, JSON.parse(ses_view));\n\t}/*\n\tlet ses_data = sessionStorage.getItem('data-datos');\n\tif (ses_data) {\n\t\tses_data = JSON.parse(ses_data);\n\t\tlet keys_data = Object.keys(ses_data.main_rows).sort().reverse().splice(0, 20);\n\t\t//console.log(\"keys\", keys_data);\n\t\tObject.assign(result, {rows: keys_data.map((key)=>ses_data.main_rows[key])});\n\t}\n\tconsole.log(\"RESULT_PROPS\", result);*/\n\treturn result;\n}\n\n$(\n\tReactDOM.render(<Datos ref={DATOS_REF} {...getInitPropsDatos()} />, document.querySelector(\"#datos-cnt\"))\n);\n"]}